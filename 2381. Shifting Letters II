class Solution {

public:
    string shiftingLetters(string s, vector<vector<int>>& shifts) {
        int n=s.size();
        vector<int> diff(n+1,0);
        for(vector<int> &v:shifts){
            if(v[2]==1){
                diff[v[0]]++;
                diff[v[1]+1]--;
            } 
            else{
                diff[v[0]]--;
                diff[v[1]+1]++;                
            } 
        }
        int shift=0;
        for(int i=0;i<n;++i){
            shift+=diff[i];
            s[i] = (char)((s[i] - 'a' + (shift % 26)+26)%26 + 'a');
        }
        return s;

    }
};
